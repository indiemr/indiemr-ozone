"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[5556],{5556:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(5641),l=n.n(r),o=n(3150),a=n(1835),i=n(8254),u=n(6438);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,l,o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,l)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function a(e){s(o,r,l,a,i,"next",e)}function i(e){s(o,r,l,a,i,"throw",e)}a(void 0)}))}}const d=function(e){var t,n,s=e.closeDeleteModal,d=e.allergyId,y=e.patientUuid,p=(0,o.useTranslation)().t,h=(0,u.i2)(y).mutate,b=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=b[0],g=b[1],v=(0,r.useCallback)(f((function(){return function(e,t){var n,r,l,o,a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((l=(l=a.trys).length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){a.label=o[1];break}if(6===o[0]&&a.label<l[1]){a.label=l[1],l=o;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(o);break}l[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}(this,(function(e){return g(!0),(0,u.Nk)(y,d,new AbortController).then((function(e){e.ok&&(h(),s(),(0,i.showSnackbar)({isLowContrast:!0,kind:"success",title:p("allergyDeleted","Allergy deleted")}))})).catch((function(e){console.error("Error deleting allergy: ",e),(0,i.showSnackbar)({isLowContrast:!1,kind:"error",title:p("errorDeletingAllergy","Error deleting allergy"),subtitle:null==e?void 0:e.message})})),[2]}))})),[s,d,h,p,y]);return l().createElement("div",null,l().createElement(a.rQ0,{closeModal:s,title:p("deletePatientAllergy","Delete allergy")}),l().createElement(a.cwr,null,l().createElement("p",null,p("deleteModalConfirmationText","Are you sure you want to delete this allergy?"))),l().createElement(a.jlY,null,l().createElement(a.$nd,{kind:"secondary",onClick:s},p("cancel","Cancel")),l().createElement(a.$nd,{kind:"danger",onClick:v,disabled:m},m?l().createElement(a.OuH,{description:p("deleting","Deleting")+"..."}):l().createElement("span",null,p("delete","Delete")))))}}}]);