"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[9574],{9193:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(5836),a=t.n(r),l=t(8023),o=t.n(l)()(a());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-allergies__allergy-form__header___P7zvd{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-patient-allergies__allergy-form__content___iEv8G{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem}.-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt fieldset{display:grid;grid-template-columns:1fr 1fr;width:100%}.-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt .cds--radio-button__label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__radio___XTKxu{margin:1rem 0}.-esm-patient-allergies__allergy-form__radio___XTKxu label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__checkbox___0Cnkb:not(:first-child){margin:.3rem 0}.-esm-patient-allergies__allergy-form__input___JD9XH{margin:0 1rem 1rem}.-esm-patient-allergies__allergy-form__checkboxContainer___XnRHC{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-allergies__allergy-form__button___NWHJX{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-allergies__allergy-form__desktopButtons___OHQg0{margin-top:2rem}.-esm-patient-allergies__allergy-form__tabletButtons___jiQUo{margin-top:2rem;padding:1.5rem 1rem;background-color:#fff}.-esm-patient-allergies__allergy-form__actionButtons___Dg6RD{position:sticky;bottom:0}.-esm-patient-allergies__allergy-form__formContent___IqWxT{margin:1rem}.-esm-patient-allergies__allergy-form__form___qXnav{display:flex;flex-direction:column;justify-content:space-between}.omrs-breakpoint-gt-tablet .-esm-patient-allergies__allergy-form__form___qXnav{height:100%}.omrs-breakpoint-lt-desktop .-esm-patient-allergies__allergy-form__form___qXnav{height:calc(100vh - 9rem)}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-form/allergy-form.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,oGAAA,CACA,2GAAA,CCxDF,sDACE,oCAAA,CACA,QAAA,CAGF,uDACE,YAAA,CACA,iCAAA,CACA,iBAAA,CAGF,yEACE,YAAA,CACA,6BAAA,CACA,UAAA,CAGF,0FACE,0BAAA,CAGF,qDACE,aAAA,CAEA,2DACE,0BAAA,CAKF,0EACE,cAAA,CAIJ,qDACE,kBAAA,CAGF,iEACE,YAAA,CACA,6BAAA,CAGF,sDACE,WCQW,CDPX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,8DACE,eCfW,CDkBb,6DACE,eCnBW,CDoBX,mBAAA,CACA,qBD7DM,CCgER,6DACE,eAAA,CACA,QAAA,CAGF,2DACE,WCxCW,CD2Cb,oDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CAKA,+EACE,WAAA,CAMF,gFACE,yBAAA",sourcesContent:["$ui-01: #f4f4f4;\n$ui-02: #ffffff;\n$ui-03: #e0e0e0;\n$ui-04: #8d8d8d;\n$ui-05: #161616;\n$text-02: #525252;\n$text-03: #a8a8a8;\n$ui-background: #ffffff;\n$color-gray-30: #c6c6c6;\n$color-gray-70: #525252;\n$color-gray-100: #161616;\n$color-blue-60-2: #0f62fe;\n$color-blue-10: #edf5ff;\n$color-yellow-50: #feecae;\n$carbon--red-50: #fa4d56;\n$inverse-link: #78a9ff;\n$support-02: #24a148;\n$inverse-support-03: #f1c21b;\n$warning-background: #fff8e1;\n$openmrs-background-grey: #f4f4f4;\n$danger: #da1e28;\n$interactive-01: #0f62fe;\n$field-01: #f4f4f4;\n$grey-2: #e0e0e0;\n$labeldropdown: #c6c6c6;\n\n$brand-primary-10: #d9fbfb;\n$brand-primary-20: #9ef0f0;\n$brand-primary-30: #3ddbd9;\n$brand-primary-40: #08bdba;\n$brand-primary-50: #009d9a;\n\n/* 60,70 and 80 are already declared as brand-01, 02 and 03 respectively */\n\n$brand-primary-90: #022b30;\n$brand-primary-100: #081a1c;\n\n@mixin brand-01($property) {\n  #{$property}: #005d5d;\n  #{$property}: var(--brand-01);\n}\n\n@mixin brand-02($property) {\n  #{$property}: #004144;\n  #{$property}: var(--brand-02);\n}\n\n@mixin brand-03($property) {\n  #{$property}: #007d79;\n  #{$property}: var(--brand-03);\n}\n\n:root {\n  --brand-01: #005d5d;\n  --brand-02: #004144;\n  --brand-03: #007d79;\n  --bottom-nav-height: 4rem;\n  --workspace-header-height: 3rem;\n  --tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));\n  --desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height));\n}\n\n$breakpoint-phone-min: 0px;\n$breakpoint-phone-max: 600px;\n$breakpoint-tablet-min: 601px;\n$breakpoint-tablet-max: 1023px;\n$breakpoint-small-desktop-min: 1024px;\n$breakpoint-small-desktop-max: 1439px;\n$breakpoint-large-desktop-min: 1440px;\n$breakpoint-large-desktop-max: 99999999px;\n\n/* These color variables will be removed in a future release */\n$brand-teal-01: #007d79;\n$brand-01: #005d5d;\n$brand-02: #004144;\n","@use '@carbon/layout';\n@use '@openmrs/esm-styleguide/src/vars' as *;\n\n.header {\n  border-bottom: 0.0625rem solid $grey-2;\n  margin: 0;\n}\n\n.content {\n  display: grid;\n  grid-template-columns: 50% 10% 1fr;\n  margin: layout.$spacing-03 layout.$spacing-05;\n}\n\n.wrapperContainer fieldset {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  width: 100%;\n}\n\n.wrapperContainer :global(.cds--radio-button__label) {\n  justify-content: flex-start;\n}\n\n.radio {\n  margin: layout.$spacing-05 0;\n\n  label {\n    justify-content: flex-start;\n  }\n}\n\n.checkbox {\n  &:not(:first-child) {\n    margin: 0.3rem 0;\n  }\n}\n\n.input {\n  margin: 0 layout.$spacing-05 layout.$spacing-05;\n}\n\n.checkboxContainer {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n\n.button {\n  height: layout.$spacing-10;\n  display: flex;\n  align-content: flex-start;\n  align-items: baseline;\n  min-width: 50%;\n}\n\n.desktopButtons {\n  margin-top: layout.$spacing-07;\n}\n\n.tabletButtons {\n  margin-top: layout.$spacing-07;\n  padding: layout.$spacing-06 layout.$spacing-05;\n  background-color: $ui-02;\n}\n\n.actionButtons {\n  position: sticky;\n  bottom: 0;\n}\n\n.formContent {\n  margin: layout.$spacing-05;\n}\n\n.form {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n/* Desktop */\n:global(.omrs-breakpoint-gt-tablet) {\n  .form {\n    height: 100%;\n  }\n}\n\n/* Tablet */\n:global(.omrs-breakpoint-lt-desktop) {\n  .form {\n    height: calc(100vh - 9rem);\n  }\n}\n","// Code generated by @carbon/layout. DO NOT EDIT.\n//\n// Copyright IBM Corp. 2018, 2023\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-01: 0.125rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-02: 0.25rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-03: 0.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-04: 0.75rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-05: 1rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-06: 1.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-07: 2rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-08: 2.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-09: 3rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-10: 4rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-11: 5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-12: 6rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-13: 10rem !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/layout\n$spacing: (\n  spacing-01: $spacing-01,\n  spacing-02: $spacing-02,\n  spacing-03: $spacing-03,\n  spacing-04: $spacing-04,\n  spacing-05: $spacing-05,\n  spacing-06: $spacing-06,\n  spacing-07: $spacing-07,\n  spacing-08: $spacing-08,\n  spacing-09: $spacing-09,\n  spacing-10: $spacing-10,\n  spacing-11: $spacing-11,\n  spacing-12: $spacing-12,\n  spacing-13: $spacing-13,\n);\n"],sourceRoot:""}]),o.locals={header:"-esm-patient-allergies__allergy-form__header___P7zvd",content:"-esm-patient-allergies__allergy-form__content___iEv8G",wrapperContainer:"-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt",radio:"-esm-patient-allergies__allergy-form__radio___XTKxu",checkbox:"-esm-patient-allergies__allergy-form__checkbox___0Cnkb",input:"-esm-patient-allergies__allergy-form__input___JD9XH",checkboxContainer:"-esm-patient-allergies__allergy-form__checkboxContainer___XnRHC",button:"-esm-patient-allergies__allergy-form__button___NWHJX",desktopButtons:"-esm-patient-allergies__allergy-form__desktopButtons___OHQg0",tabletButtons:"-esm-patient-allergies__allergy-form__tabletButtons___jiQUo",actionButtons:"-esm-patient-allergies__allergy-form__actionButtons___Dg6RD",formContent:"-esm-patient-allergies__allergy-form__formContent___IqWxT",form:"-esm-patient-allergies__allergy-form__form___qXnav"};const i=o},9574:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var r,a,l=t(5641),o=t.n(l),i=t(3373),s=t.n(i),c=t(3150),u=t(1835),d=t(6195),p=t(1160),m=t(824),g=t(8254),f=t(5260),y=t.n(f);!function(e){e.MILD="mild",e.MODERATE="moderate",e.SEVERE="severe"}(r||(r={})),function(e){e.DRUG="DRUG",e.FOOD="FOOD",e.ENVIRONMENT="ENVIRONMENT",e.OTHER="OTHER"}(a||(a={})),t(8917);var A=t(6438),_=t(111),b=t.n(_),v=t(5660),h=t.n(v),C=t(3824),E=t.n(C),$=t(8823),k=t.n($),w=t(6747),x=t.n(w),B=t(4072),R=t.n(B),T=t(9193),N={};N.styleTagTransform=R(),N.setAttributes=k(),N.insert=E().bind(null,"head"),N.domAPI=h(),N.insertStyleElement=x(),b()(T.A,N);const D=T.A&&T.A.locals?T.A.locals:void 0;function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,n){if(e){if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}var W=d.z.object({allergen:d.z.object({uuid:d.z.string(),display:d.z.string(),type:d.z.string()}).required(),nonCodedAllergen:d.z.string().optional(),allergicReactions:d.z.array(d.z.string().optional()),nonCodedAllergicReaction:d.z.string().optional(),severityOfWorstReaction:d.z.string(),comment:d.z.string().optional()});function U(e){var n=e.allergicReactions,t=e.methods,r=t.control,a=t.setValue,i=(0,l.useCallback)((function(e,n,t,r){e(t),a("allergicReactions.".concat(r),n?t:"",{shouldValidate:!0})}),[a]),s=n.map((function(e,n){return o().createElement(m.xI,{key:e.uuid,name:"allergicReactions.".concat(n),control:r,defaultValue:"",render:function(t){var r=t.field,a=r.onBlur,l=r.onChange,s=r.value;return o().createElement(u.Sc0,{className:D.checkbox,labelText:e.display,id:e.uuid,onChange:function(e,t){var r=t.checked,a=t.id;i(l,r,a,n)},checked:Boolean(s),onBlur:a})}})}));return o().createElement(o().Fragment,null,s)}const F=function(e){var n,t,r,i,d,f=e.closeWorkspace,_=e.patientUuid,b=e.allergy,v=e.formContext,h=e.promptBeforeClosing,C=(0,c.useTranslation)().t,E=(0,g.useConfig)().concepts,$="tablet"===(0,g.useLayoutType)(),k=[C("mild","Mild"),C("moderate","Moderate"),C("severe","Severe")],w=(0,l.useMemo)((function(){return{patientUuid:_}}),[_]),x=(0,l.useMemo)((function(){return E}),[E]),B=x.mildReactionUuid,R=x.severeReactionUuid,T=x.moderateReactionUuid,N=x.otherConceptUuid,O=(n=(0,g.useConfig)().concepts.allergyReactionUuid,r=(t=y()("".concat(g.restBaseUrl,"/concept/").concat(n,"?v=full"),g.openmrsFetch)).data,{isLoading:t.isLoading,allergicReactions:null==r?void 0:r.data.setMembers.map((function(e){return{uuid:e.uuid,display:e.display}}))}),F=O.allergicReactions,M=O.isLoading,j=function(){var e=(0,g.useConfig)().concepts,n=e.drugAllergenUuid,t=e.environmentalAllergenUuid,r=e.foodAllergenUuid,o=e.otherConceptUuid,i=y()("".concat(g.restBaseUrl,"/concept/").concat(n,"?v=full"),g.openmrsFetch).data,s=y()("".concat(g.restBaseUrl,"/concept/").concat(t,"?v=full"),g.openmrsFetch).data,c=y()("".concat(g.restBaseUrl,"/concept/").concat(r,"?v=full"),g.openmrsFetch).data;return(0,l.useMemo)((function(){var e=[],n=function(n,t){var r,a;null==n||null===(a=n.data)||void 0===a||null===(r=a.setMembers)||void 0===r||r.forEach((function(n){e.push({uuid:n.uuid,display:n.display,type:t})}))};return n(i,a.DRUG),n(s,a.ENVIRONMENT),n(c,a.FOOD),e.forEach((function(n,t){n.uuid===o&&e.splice(t,1)})),e.sort((function(e,n){return e.display.localeCompare(n.display)})),{allergens:e,isLoading:!i||!s||!c}}),[i,s,c,o])}().allergens,G=(i=(0,l.useState)(!0),d=2,function(e){if(Array.isArray(e))return e}(i)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(i)throw a}}return l}}(i,d)||I(i,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),X=G[0],z=G[1],L=(0,A.i2)(_).mutate,H=function(){return null==F?void 0:F.map((function(e){var n;return(null==b||null===(n=b.reactionManifestations)||void 0===n?void 0:n.includes(e.display))?e.uuid:""}))},V=function(e){var n=null==j?void 0:j.map((function(e){return null==e?void 0:e.display}));(null==n?void 0:n.includes(null==b?void 0:b.display))||(e.allergen={uuid:N,display:C("other","Other"),type:null==a?void 0:a.OTHER},e.nonCodedAllergen=null==b?void 0:b.display)},q=function(e){var n,t=null==F?void 0:F.map((function(e){return null==e?void 0:e.display}));null==b||null===(n=b.reactionManifestations)||void 0===n||n.forEach((function(n){var r,a;(null==t?void 0:t.includes(n))||(e.nonCodedAllergicReaction=n,null===(a=e.allergicReactions)||void 0===a||a.splice((null===(r=e.allergicReactions)||void 0===r?void 0:r.length)-1,1,N))}))},P=(0,m.mN)({mode:"all",resolver:(0,p.u)(W),values:function(e,n){var t={allergen:null,nonCodedAllergen:"",allergicReactions:[],nonCodedAllergicReaction:"",severityOfWorstReaction:null,comment:""};return"editing"===n&&(t.allergen=null==j?void 0:j.find((function(n){return(null==e?void 0:e.display)===(null==n?void 0:n.display)})),t.allergicReactions=H(),t.severityOfWorstReaction=function(e){switch(e){case"mild":return B;case"moderate":return T;case"severe":return R;default:return null}}(null==e?void 0:e.reactionSeverity),t.comment="--"!==(null==e?void 0:e.note)?null==e?void 0:e.note:"",V(t),q(t)),t}(b,v)}),Q=P.control,K=P.handleSubmit,J=P.watch,Y=(P.getValues,P.setValue),Z=P.formState.isDirty;(0,l.useEffect)((function(){h((function(){return Z}))}),[Z,h]);var ee=J("allergen"),ne=J("allergicReactions"),te=J("severityOfWorstReaction"),re=J("nonCodedAllergen"),ae=J("nonCodedAllergicReaction"),le=null==ne?void 0:ne.some((function(e){return""!==e}));(0,l.useEffect)((function(){z(!(ee&&le&&te))}),[ne,J,ee,te,N,re,le]);var oe,ie,se,ce=(0,l.useCallback)((function(e){var n=e.allergen,t=e.comment,r=e.nonCodedAllergen,a=e.nonCodedAllergicReaction,l=e.allergicReactions,o=e.severityOfWorstReaction,i=l.filter((function(e){return""!==e})),s={allergen:n.uuid==N?{allergenType:n.type,codedAllergen:{uuid:n.uuid},nonCodedAllergen:r}:{allergenType:n.type,codedAllergen:{uuid:n.uuid}},severity:{uuid:o},comment:t,reactions:null==i?void 0:i.map((function(e){return e===N?{reaction:{uuid:e},reactionNonCoded:a}:{reaction:{uuid:e}}}))},c=new AbortController;"editing"===v?function(e,n,t,r){return(0,g.openmrsFetch)("".concat(g.restBaseUrl,"/patient/").concat(n,"/allergy/").concat(t),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:r.signal})}(s,_,null==b?void 0:b.id,c).then((function(e){200===e.status&&(L(),f({ignoreChanges:!0}),(0,g.showSnackbar)({isLowContrast:!0,kind:"success",title:C("allergyUpdated","Allergy updated"),subtitle:C("allergyNowVisible","It is now visible on the Allergies page")}))}),(function(e){(0,g.showSnackbar)({title:C("allergySaveError","Error saving allergy"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})})).finally((function(){return c.abort()})):function(e,n,t){return(0,g.openmrsFetch)("".concat(g.restBaseUrl,"/patient/").concat(n,"/allergy"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t.signal})}(s,_,c).then((function(e){201===e.status&&(L(),f({ignoreChanges:!0}),(0,g.showSnackbar)({isLowContrast:!0,kind:"success",title:C("allergySaved","Allergy saved"),subtitle:C("allergyNowVisible","It is now visible on the Allergies page")}))}),(function(e){(0,g.showSnackbar)({title:C("allergySaveError","Error saving allergy"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})})).finally((function(){return c.abort()}))}),[N,_,C,L,null==b?void 0:b.id,f,v]);return o().createElement(u.lVW,{onSubmit:K(ce)},$?o().createElement(u.fI1,{className:D.header},o().createElement(g.ExtensionSlot,{className:D.content,name:"patient-details-header-slot",state:w})):null,o().createElement("div",{className:D.form},o().createElement(u.BJc,{gap:7,className:D.formContent},(null==ee?void 0:ee.uuid)===N&&o().createElement(u.jeF,{style:{minWidth:"100%"},kind:"warning",lowContrast:!0,hideCloseButton:!0,title:C("nonCodedAllergenWarningTitle","Warning: Custom Allergen Entry"),subtitle:C("nonCodedAllergenWarningDescription","Adding a custom allergen may impact system-wide allergy notifications. It's recommended to choose from the provided list for accurate alerts. Custom entries may not trigger notifications in all relevant contexts.")}),o().createElement(g.ResponsiveWrapper,null,o().createElement(u.gE_,{legendText:C("allergen","Allergen"),"data-testid":"allergens-container"},o().createElement(m.xI,{name:"allergen",control:Q,render:function(e){var n=e.field,t=n.value,r=n.onChange;return o().createElement(u.a32,{id:"allergen",items:S(j).concat([{uuid:N,display:C("other","Other"),type:a.OTHER}]),itemToString:function(e){return null==e?void 0:e.display},placeholder:C("selectAllergen","Select the allergen"),selectedItem:t,onChange:function(e){var n=e.selectedItem;return r(n)}})}}))),(null==ee?void 0:ee.uuid)===N&&o().createElement(g.ResponsiveWrapper,null,o().createElement(m.xI,{name:"nonCodedAllergen",control:Q,render:function(e){var n=e.field,t=n.onBlur,r=n.onChange,a=n.value;return o().createElement(u.ksK,{id:"nonCodedAllergen",labelText:C("otherNonCodedAllergen","Other non-coded allergen"),onChange:r,onBlur:t,value:a,placeholder:C("typeAllergenName","Please type in the name of the allergen")})}})),o().createElement("div",null,o().createElement("div",{className:s()((oe={},ie=D.checkboxContainer,se=$,ie in oe?Object.defineProperty(oe,ie,{value:se,enumerable:!0,configurable:!0,writable:!0}):oe[ie]=se,oe))},M?o().createElement(u.OuH,{description:"".concat(C("loading","Loading")," ...")}):o().createElement(u.gE_,{legendText:C("selectReactions","Select the reactions"),"data-testid":"allergic-reactions-container"},o().createElement(U,{allergicReactions:F,methods:{setValue:Y,control:Q}}))),(null==ne?void 0:ne.includes(N))?o().createElement("div",{className:D.input},o().createElement(g.ResponsiveWrapper,null,o().createElement(m.xI,{name:"nonCodedAllergicReaction",control:Q,render:function(e){var n=e.field,t=n.onBlur,r=n.onChange,a=n.value;return o().createElement(u.ksK,{id:"nonCodedAllergicReaction",labelText:C("otherNonCodedAllergicReaction","Other non-coded allergic reaction"),onChange:r,onBlur:t,value:a,placeholder:C("typeAllergicReactionName","Please type in the name of the allergic reaction")})}}))):null),o().createElement("div",null,o().createElement(u.gE_,{legendText:C("severityOfWorstReaction","Severity of worst reaction")},o().createElement(m.xI,{name:"severityOfWorstReaction",control:Q,render:function(e){var n=e.field,t=n.onBlur,r=n.onChange,a=n.value;return o().createElement(u.zWQ,{name:"severity-of-worst-reaction",onChange:function(e){return r(e.toString())},valueSelected:a,onBlur:t},k.map((function(e,n){return o().createElement(u.aaP,{id:e.toLowerCase()+"Severity",key:"severity-".concat(n),labelText:e,value:function(){switch(e.toLowerCase()){case"mild":return B;case"moderate":return T;case"severe":return R;default:return""}}()})})))}}))),o().createElement("div",null,o().createElement(g.ResponsiveWrapper,null,o().createElement(m.xI,{name:"comment",control:Q,render:function(e){var n=e.field,t=n.onBlur,r=n.onChange,a=n.value;return o().createElement(u.fs1,{id:"comments",invalidText:C("invalidComment","Invalid comment, try again"),labelText:C("dateOfOnsetAndComments","Date of onset and comments"),onChange:r,placeholder:C("typeAdditionalComments","Type any additional comments here"),onBlur:t,value:a,rows:4})}})))),o().createElement(u.Te$,{className:s()($?D.tabletButtons:D.desktopButtons,D.actionButtons)},o().createElement(u.$nd,{className:D.button,onClick:f,kind:"secondary"},C("discard","Discard")),o().createElement(u.$nd,{className:D.button,disabled:X||(null==ee?void 0:ee.uuid)===N&&!re||(null==ne?void 0:ne.includes(N))&&!ae,type:"submit",kind:"primary"},C("saveAndClose","Save and close")))))}}}]);