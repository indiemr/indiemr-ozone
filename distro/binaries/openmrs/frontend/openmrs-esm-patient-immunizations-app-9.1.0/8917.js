/*! For license information please see 8917.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_openmrs_esm_patient_immunizations_app=globalThis.webpackChunk_openmrs_esm_patient_immunizations_app||[]).push([[8917],{4026:(e,n,t)=>{var i=t(1343),r="function"==typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},s=i.useState,a=i.useEffect,u=i.useLayoutEffect,d=i.useDebugValue;function o(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!r(e,t)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),i=s({inst:{value:t,getSnapshot:n}}),r=i[0].inst,c=i[1];return u((function(){r.value=t,r.getSnapshot=n,o(r)&&c({inst:r})}),[e,t,n]),a((function(){return o(r)&&c({inst:r}),e((function(){o(r)&&c({inst:r})}))}),[e]),d(t),t};n.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},8139:(e,n,t)=>{e.exports=t(4026)},8917:(e,n,t)=>{t.d(n,{Ay:()=>d,iX:()=>s.useSWRConfig});var i=t(1343),r=t(8139),s=t(6112);const a=i.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((n=>{e.status="fulfilled",e.value=n}),(n=>{e.status="rejected",e.reason=n})),e)}),u={dedupe:!0},d=(s.OBJECT.defineProperty(s.SWRConfig,"defaultValue",{value:s.defaultConfig}),(0,s.withArgs)(((e,n,t)=>{const{cache:d,compare:o,suspense:c,fallbackData:f,revalidateOnMount:l,revalidateIfStale:E,refreshInterval:g,refreshWhenHidden:v,refreshWhenOffline:p,keepPreviousData:h}=t,[R,S,m,U]=s.SWRGlobalState.get(d),[_,T]=(0,s.serialize)(e),V=(0,i.useRef)(!1),b=(0,i.useRef)(!1),C=(0,i.useRef)(_),y=(0,i.useRef)(n),w=(0,i.useRef)(t),L=()=>w.current,I=()=>L().isVisible()&&L().isOnline(),[O,k,D,A]=(0,s.createCacheHelper)(d,_),N=(0,i.useRef)({}).current,F=(0,s.isUndefined)(f)?t.fallback[_]:f,P=(e,n)=>{for(const t in N){const i=t;if("data"===i){if(!o(e[i],n[i])){if(!(0,s.isUndefined)(e[i]))return!1;if(!o(q,n[i]))return!1}}else if(n[i]!==e[i])return!1}return!0},j=(0,i.useMemo)((()=>{const e=!!_&&!!n&&((0,s.isUndefined)(l)?!L().isPaused()&&!c&&(!!(0,s.isUndefined)(E)||E):l),t=n=>{const t=(0,s.mergeObjects)(n);return delete t._k,e?{isValidating:!0,isLoading:!0,...t}:t},i=O(),r=A(),a=t(i),u=i===r?a:t(r);let d=a;return[()=>{const e=t(O());return P(e,d)?(d.data=e.data,d.isLoading=e.isLoading,d.isValidating=e.isValidating,d.error=e.error,d):(d=e,e)},()=>u]}),[d,_]),x=(0,r.useSyncExternalStore)((0,i.useCallback)((e=>D(_,((n,t)=>{P(t,n)||e()}))),[d,_]),j[0],j[1]),W=!V.current,M=R[_]&&R[_].length>0,z=x.data,G=(0,s.isUndefined)(z)?F:z,H=x.error,Y=(0,i.useRef)(G),q=h?(0,s.isUndefined)(z)?Y.current:z:G,B=!(M&&!(0,s.isUndefined)(H))&&(W&&!(0,s.isUndefined)(l)?l:!L().isPaused()&&(c?!(0,s.isUndefined)(G)&&E:(0,s.isUndefined)(G)||E)),J=!!(_&&n&&W&&B),X=(0,s.isUndefined)(x.isValidating)?J:x.isValidating,K=(0,s.isUndefined)(x.isLoading)?J:x.isLoading,Q=(0,i.useCallback)((async e=>{const n=y.current;if(!_||!n||b.current||L().isPaused())return!1;let i,r,a=!0;const u=e||{},d=!m[_]||!u.dedupe,c=()=>s.IS_REACT_LEGACY?!b.current&&_===C.current&&V.current:_===C.current,f={isValidating:!1,isLoading:!1},l=()=>{k(f)},E=()=>{const e=m[_];e&&e[1]===r&&delete m[_]},g={isValidating:!0};(0,s.isUndefined)(O().data)&&(g.isLoading=!0);try{if(d&&(k(g),t.loadingTimeout&&(0,s.isUndefined)(O().data)&&setTimeout((()=>{a&&c()&&L().onLoadingSlow(_,t)}),t.loadingTimeout),m[_]=[n(T),(0,s.getTimestamp)()]),[i,r]=m[_],i=await i,d&&setTimeout(E,t.dedupingInterval),!m[_]||m[_][1]!==r)return d&&c()&&L().onDiscarded(_),!1;f.error=s.UNDEFINED;const e=S[_];if(!(0,s.isUndefined)(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return l(),d&&c()&&L().onDiscarded(_),!1;const u=O().data;f.data=o(u,i)?u:i,d&&c()&&L().onSuccess(i,_,t)}catch(e){E();const n=L(),{shouldRetryOnError:t}=n;n.isPaused()||(f.error=e,d&&c()&&(n.onError(e,_,n),(!0===t||(0,s.isFunction)(t)&&t(e))&&I()&&n.onErrorRetry(e,_,n,(e=>{const n=R[_];n&&n[0]&&n[0](s.revalidateEvents.ERROR_REVALIDATE_EVENT,e)}),{retryCount:(u.retryCount||0)+1,dedupe:!0})))}return a=!1,l(),!0}),[_,d]),Z=(0,i.useCallback)(((...e)=>(0,s.internalMutate)(d,C.current,...e)),[]);if((0,s.useIsomorphicLayoutEffect)((()=>{y.current=n,w.current=t,(0,s.isUndefined)(z)||(Y.current=z)})),(0,s.useIsomorphicLayoutEffect)((()=>{if(!_)return;const e=Q.bind(s.UNDEFINED,u);let n=0;const t=(0,s.subscribeCallback)(_,R,((t,i={})=>{if(t==s.revalidateEvents.FOCUS_EVENT){const t=Date.now();L().revalidateOnFocus&&t>n&&I()&&(n=t+L().focusThrottleInterval,e())}else if(t==s.revalidateEvents.RECONNECT_EVENT)L().revalidateOnReconnect&&I()&&e();else{if(t==s.revalidateEvents.MUTATE_EVENT)return Q();if(t==s.revalidateEvents.ERROR_REVALIDATE_EVENT)return Q(i)}}));return b.current=!1,C.current=_,V.current=!0,k({_k:T}),B&&((0,s.isUndefined)(G)||s.IS_SERVER?e():(0,s.rAF)(e)),()=>{b.current=!0,t()}}),[_]),(0,s.useIsomorphicLayoutEffect)((()=>{let e;function n(){const n=(0,s.isFunction)(g)?g(O().data):g;n&&-1!==e&&(e=setTimeout(t,n))}function t(){O().error||!v&&!L().isVisible()||!p&&!L().isOnline()?n():Q(u).then(n)}return n(),()=>{e&&(clearTimeout(e),e=-1)}}),[g,v,p,_]),(0,i.useDebugValue)(q),c&&(0,s.isUndefined)(G)&&_){if(!s.IS_REACT_LEGACY&&s.IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");y.current=n,w.current=t,b.current=!1;const e=U[_];if(!(0,s.isUndefined)(e)){const n=Z(e);a(n)}if(!(0,s.isUndefined)(H))throw H;{const e=Q(u);(0,s.isUndefined)(q)||(e.status="fulfilled",e.value=!0),a(e)}}return{mutate:Z,get data(){return N.data=!0,q},get error(){return N.error=!0,H},get isValidating(){return N.isValidating=!0,X},get isLoading(){return N.isLoading=!0,K}}})))}}]);