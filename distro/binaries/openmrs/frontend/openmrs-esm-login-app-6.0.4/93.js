"use strict";(globalThis.webpackChunk_openmrs_esm_login_app=globalThis.webpackChunk_openmrs_esm_login_app||[]).push([[93],{5193:(e,n,r)=>{r.d(n,{Z:()=>i});var o=r(9233),s=r.n(o),a=r(361),t=r.n(a)()(s());t.push([e.id,".-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading{min-height:1rem}.-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading__text{font-size:unset}","",{version:3,sources:["webpack://./src/change-password/change-password-modal.scss"],names:[],mappings:"AACE,8EACE,eAAA,CAGF,oFACE,eAAA",sourcesContent:[".submitButton {\r\n  :global(.cds--inline-loading) {\r\n    min-height: 1rem;\r\n  }\r\n\r\n  :global(.cds--inline-loading__text) {\r\n    font-size: unset;\r\n  }\r\n}\r\n"],sourceRoot:""}]),t.locals={submitButton:"-esm-login__change-password-modal__submitButton___M2e6N"};const i=t},93:(e,n,r)=>{r.r(n),r.d(n,{default:()=>T});var o=r(5776),s=r.n(o),a=r(2680),t=r(2093),i=r(9389),l=r(5834),d=r(4313),u=r(4610),c=r(5352),m=r(487),w=r.n(m),g=r(631),p=r.n(g),f=r(2052),h=r.n(f),v=r(4010),_=r.n(v),b=r(1469),C=r.n(b),P=r(9329),y=r.n(P),E=r(5193),A={};A.styleTagTransform=y(),A.setAttributes=_(),A.insert=h().bind(null,"head"),A.domAPI=p(),A.insertStyleElement=C(),w()(E.Z,A);const q=E.Z&&E.Z.locals?E.Z.locals:void 0;function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,s,a=[],t=!0,i=!1;try{for(r=r.call(e);!(t=(o=r.next()).done)&&(a.push(o.value),!n||a.length!==n);t=!0);}catch(e){i=!0,s=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw s}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return S(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(e){var n=e.close,r=(0,a.useTranslation)().t,m=k((0,o.useState)(!1),2),w=m[0],g=m[1],p=k((0,o.useState)(null),2),f=p[0],h=p[1],v=t.z.string({required_error:r("oldPasswordRequired","Old password is required")}).trim().min(1,r("oldPasswordRequired","Old password is required")),_=t.z.string({required_error:r("newPasswordRequired","New password is required")}).trim().min(1,r("newPasswordRequired","New password is required")),b=t.z.string({required_error:r("passwordConfirmationRequired","Password confirmation is required")}).trim().min(1,r("passwordConfirmationRequired","Password confirmation is required")),C=t.z.object({oldPassword:v,newPassword:_,passwordConfirmation:b}).refine((function(e){return e.newPassword===e.passwordConfirmation}),{message:r("passwordsDoNotMatch","Passwords do not match"),path:["passwordConfirmation"]}),P=(0,l.cI)({resolver:(0,i.F)(C),defaultValues:{oldPassword:"",newPassword:"",passwordConfirmation:""}}),y=P.handleSubmit,E=P.control,A=P.formState.errors,S=(0,o.useCallback)((function(e){g(!0);var o=e.oldPassword,s=e.newPassword;(0,c.o)(o,s).then((function(){n(),(0,u.showSnackbar)({title:r("passwordChangedSuccessfully","Password changed successfully"),kind:"success"})})).catch((function(e){var n,r,o=null!==(r=null==e||null===(n=e.responseBody)||void 0===n?void 0:n.message)&&void 0!==r?r:null==e?void 0:e.message;h(o)})).finally((function(){g(!1)}))}),[n,r]);return s().createElement(d.Form,{onSubmit:y(S,(function(){return g(!1)}))},s().createElement(d.ModalHeader,{closeModal:n,title:r("changePassword","Change password")}),s().createElement(d.ModalBody,null,s().createElement(d.Stack,{gap:5,className:q.languageOptionsContainer},s().createElement(l.Qr,{name:"oldPassword",control:E,render:function(e){var n,o=e.field,a=o.onChange,t=o.value;return s().createElement(d.PasswordInput,{id:"oldPassword",invalid:!!(null==A?void 0:A.oldPassword),invalidText:null==A||null===(n=A.oldPassword)||void 0===n?void 0:n.message,labelText:r("oldPassword","Old password"),onChange:a,value:t})}}),s().createElement(l.Qr,{name:"newPassword",control:E,render:function(e){var n,o=e.field,a=o.onChange,t=o.value;return s().createElement(d.PasswordInput,{id:"newPassword",invalid:!!(null==A?void 0:A.newPassword),invalidText:null==A||null===(n=A.newPassword)||void 0===n?void 0:n.message,labelText:r("newPassword","New password"),onChange:a,value:t})}}),s().createElement(l.Qr,{name:"passwordConfirmation",control:E,render:function(e){var n,o=e.field,a=o.onChange,t=o.value;return s().createElement(d.PasswordInput,{id:"passwordConfirmation",invalid:!!(null==A?void 0:A.passwordConfirmation),invalidText:null==A||null===(n=A.passwordConfirmation)||void 0===n?void 0:n.message,labelText:r("confirmPassword","Confirm new password"),onChange:a,value:t})}}),f&&s().createElement(d.InlineNotification,{kind:"error",onClick:function(){return h("")},subtitle:f,title:r("errorChangingPassword","Error changing password")}))),s().createElement(d.ModalFooter,null,s().createElement(d.Button,{kind:"secondary",onClick:n},r("cancel","Cancel")),s().createElement(d.Button,{className:q.submitButton,disabled:w,type:"submit"},w?s().createElement(d.InlineLoading,{description:r("changingPassword","Changing password")+"..."}):s().createElement("span",null,r("change","Change")))))}}}]);