"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[4386],{5547:(i,t,e)=>{e.d(t,{Y:()=>a});var n=e(1343),l=e(3150),s=e(8254),r=e(9981);function o(i,t){(null==t||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function a(i,t){var e,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},d=(0,l.useTranslation)().t,v=(0,r.e4)(i).mutateVisits,y=(0,s.useVisit)(i).mutate,f=(e=(0,n.useState)(!1),a=2,function(i){if(Array.isArray(i))return i}(e)||function(i,t){var e=null==i?null:"undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(null!=e){var n,l,s=[],r=!0,o=!1;try{for(e=e.call(i);!(r=(n=e.next()).done)&&(s.push(n.value),!t||s.length!==t);r=!0);}catch(i){o=!0,l=i}finally{try{r||null==e.return||e.return()}finally{if(o)throw l}}return s}}(e,a)||function(i,t){if(i){if("string"==typeof i)return o(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);return"Object"===e&&i.constructor&&(e=i.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(i,t):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],h=f[1],g=function(){(0,r.uA)(null==t?void 0:t.uuid).then((function(){var i,e;(0,s.showSnackbar)({title:d("visitRestored","Visit restored"),subtitle:d("visitRestoredSuccessfully","{{visit}} restored successfully",{visit:null!==(e=null==t||null===(i=t.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:d("visit","Visit")}),kind:"success"}),v(),y(),null==c||c()})).catch((function(){var i,e;(0,s.showSnackbar)({title:d("visitNotRestored","Visit couldn't be restored"),subtitle:d("errorWhenRestoringVisit","Error occured when restoring {{visit}}",{visit:null!==(e=null==t||null===(i=t.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:d("visit","Visit")}),kind:"error"})}))};return{initiateDeletingVisit:function(){h(!0);var i=!(null==t?void 0:t.stopDatetime);(0,r.TH)(null==t?void 0:t.uuid).then((function(){var e,n,l,r,o,a;v(),y(),i?(0,s.showSnackbar)({title:d("visitCancelled","Visit cancelled"),subtitle:d("visitCancelSuccessMessage","Active {{visit}} cancelled successfully",{visit:null!==(n=null==t||null===(e=t.visitType)||void 0===e?void 0:e.display)&&void 0!==n?n:d("visit","Visit")}),isLowContrast:!0,kind:"success"}):(0,s.showSnackbar)({title:d("visitDeleted","{{visit}} deleted",{visit:null!==(o=null==t||null===(l=t.visitType)||void 0===l?void 0:l.display)&&void 0!==o?o:d("visit","Visit")}),subtitle:d("visitDeletedSuccessfully","{{visit}} deleted successfully",{visit:null!==(a=null==t||null===(r=t.visitType)||void 0===r?void 0:r.display)&&void 0!==a?a:d("visit","Visit")}),kind:"success",actionButtonLabel:d("undo","Undo"),onActionButtonClick:g}),null==u||u()})).catch((function(){(0,s.showSnackbar)({title:i?d("errorCancellingVisit","Error cancelling active visit"):d("errorDeletingVisit","Error deleting visit"),kind:"error",subtitle:d("errorOccuredDeletingVisit","An error occured when deleting visit")})})).finally((function(){h(!1)}))},isDeletingVisit:p}}},4386:(i,t,e)=>{e.r(t),e.d(t,{default:()=>u});var n=e(1343),l=e.n(n),s=e(3150),r=e(5198),o=e(5547),a=e(5927);const u=function(i){var t,e,n=i.closeModal,u=i.patientUuid,c=i.visit,d=(0,s.useTranslation)().t,v=(0,o.Y)(u,c,n),y=v.isDeletingVisit,f=v.initiateDeletingVisit;return l().createElement("div",null,l().createElement(r.ModalHeader,{closeModal:n,label:d("deletePastVisit","Delete past visit"),title:d("deletePastVisitDialogHeader","Are you sure you want to delete this past visit?")}),l().createElement(r.ModalBody,null,l().createElement("p",{className:a.A.body},d("confirmDeletePastVisitText","Clicking confirm will delete this {{visit}} and all of its associated encounters.",{visit:null!==(e=null==c||null===(t=c.visitType)||void 0===t?void 0:t.display)&&void 0!==e?e:d("visit","Visit")}))),l().createElement(r.ModalFooter,null,l().createElement(r.Button,{kind:"secondary",onClick:n},d("cancel","Cancel")),l().createElement(r.Button,{kind:"danger",onClick:f,disabled:y},y?l().createElement(r.InlineLoading,{description:d("deletingVisit","Deleting visit")}):d("deleteVisit","Delete visit"))))}}}]);