"use strict";(globalThis.webpackChunk_openmrs_esm_devtools_app=globalThis.webpackChunk_openmrs_esm_devtools_app||[]).push([[647],{7647:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(5776),o=r.n(n),a=r(2680),l=r(4313),u=r(8478);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,l){try{var u=e[a](l),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){c(a,n,o,l,u,"next",e)}function u(e){c(a,n,o,l,u,"throw",e)}l(void 0)}))}}function d(e,t){var r,n,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,n=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var f=/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/;function p(e,t){return v.apply(this,arguments)}function v(){return(v=s((function(e,t){var r,n,o;return d(this,(function(a){switch(a.label){case 0:return[4,window.importMapOverrides.getNextPageMap()];case 1:return r=a.sent(),(n=r.imports[e])?n.endsWith("/")?[2,"".concat(window.location.protocol,"//localhost:").concat(t).concat(n)]:[2,"".concat(window.location.protocol,"//localhost:").concat(t,"/").concat(n.substring(n.lastIndexOf("/")+1))]:(o=e.replace(/@/g,"").replace(/\//g,"-"),[2,"".concat(window.location.protocol,"//localhost:").concat(t,"/").concat(o,".js")])}}))}))).apply(this,arguments)}const m=function(e){var t,r,c,v=e.module,m=e.isNew,b=e.close,h=(0,a.useTranslation)().t,y=(r=(0,n.useState)(null==v?void 0:v.moduleName),c=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],l=!0,u=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(u)throw o}}return a}}(r,c)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(r,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=y[0],g=y[1],O=(0,n.useRef)(),M=(0,n.useRef)(),x=(0,n.useCallback)((t=s((function(e){var t,r,n,o;return d(this,(function(a){switch(a.label){case 0:return e.preventDefault(),w?(window.importMapOverrides.isDisabled(w)&&window.importMapOverrides.enableOverride(w),m?(t=M.current.value||null)?f.test(t)?[4,p(w,t)]:[3,2]:[3,3]:[3,4]):[2];case 1:t=a.sent(),a.label=2;case 2:window.importMapOverrides.addOverride(w,t),r=t.substring(0,t.lastIndexOf("/")),(0,u.addRoutesOverride)(w,new URL("routes.json",r)),a.label=3;case 3:return[3,8];case 4:return null!==(n=M.current.value||null)?[3,5]:(window.importMapOverrides.removeOverride(w),(0,u.removeRoutesOverride)(w),[3,8]);case 5:return f.test(n)?[4,p(w,n)]:[3,7];case 6:n=a.sent(),a.label=7;case 7:window.importMapOverrides.addOverride(w,n),o=n.substring(0,n.lastIndexOf("/")),(0,u.addRoutesOverride)(w,new URL("routes.json",o)),a.label=8;case 8:return b(),[2]}}))})),function(e){return t.apply(this,arguments)}),[w,m,b]);return(0,n.useEffect)((function(){var e,t;return m?null===(e=O.current)||void 0===e?void 0:e.focus():null===(t=M.current)||void 0===t?void 0:t.focus()}),[]),o().createElement(o().Fragment,null,o().createElement(l.ModalHeader,{closeModal:b,title:m?h("addModule","Add Module"):h("editModule","Edit Module {{- moduleName}}",{moduleName:w})}),o().createElement(l.Form,{onSubmit:x},o().createElement(l.ModalBody,null,o().createElement(l.Stack,{gap:5},m&&o().createElement(l.TextInput,{id:"module-name",ref:O,onChange:function(e){e.preventDefault(),g(e.target.value)},labelText:h("moduleName","Module Name")}),!m&&o().createElement(l.TextInput,{id:"default-url",labelText:h("defaultUrl","Default URL"),value:v.defaultUrl,readOnly:!0}),o().createElement(l.TextInput,{id:"override-url",ref:M,labelText:h("overrideUrl","Override URL")}))),o().createElement(l.ModalFooter,null,o().createElement(l.Button,{kind:"secondary",onClick:b},h("cancel","Cancel")),o().createElement(l.Button,{type:"submit"},h("apply","Apply")))))}}}]);