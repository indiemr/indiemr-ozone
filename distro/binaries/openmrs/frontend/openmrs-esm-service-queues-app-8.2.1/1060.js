"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[1060,3199],{3199:(t,e,n)=>{n.r(e),n.d(e,{default:()=>d});var r=n(5206),i=n.n(r),u=n(4924),a=n(9363),o=n(7702),s=n(88);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const d=function(t){var e=t.queueEntry,n=t.closeModal,r=t.modalTitle,d=(0,u.useTranslation)().t;return i().createElement(a.Z,{queueEntry:e,closeModal:n,modalParams:{modalTitle:r||d("transitionPatient","Transition patient"),modalInstruction:d("transitionPatientStatusOrQueue","Select a new status or queue for patient to transition to."),submitButtonText:d("transitionPatient","Transition patient"),submitSuccessTitle:d("queueEntryTransitioned","Queue entry transitioned"),submitSuccessText:d("queueEntryTransitionedSuccessfully","Queue entry transitioned successfully"),submitFailureTitle:d("queueEntryTransitionFailed","Error transitioning queue entry"),submitAction:function(t,e){var n,r,i=new Date(e.transitionDate),u=(n=(0,s.A)(e.transitionTime,e.transitionTimeFormat),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,u=[],a=!0,o=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return u}}(n,r)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],d=u[1];return i.setHours(a,d,0,0),(0,o.rf)(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){c(t,e,n[e])}))}return t}({queueEntryToTransition:t.uuid,newQueue:e.selectedQueue,newStatus:e.selectedStatus,newPriority:e.selectedPriority,newPriorityComment:e.prioritycomment},e.modifyDefaultTransitionDateTime?{transitionDate:i.toISOString()}:{}))},disableSubmit:function(t,e){return e.selectedQueue==t.queue.uuid&&e.selectedStatus==t.status.uuid},isTransition:!0}})}},1060:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(5206),i=n.n(r),u=n(4924),a=n(7234),o=n(3649),s=n(3199);const l=function(t){var e=t.closeModal,n=t.patientUuid,r=(t.modalTitle,(0,u.useTranslation)().t),l=function(t){var e,n,r,i=encodeURIComponent("custom:(uuid,display,queue:(uuid,display,name,location:(uuid,display),service:(uuid,display),allowedPriorities:(uuid,display),allowedStatuses:(uuid,display)),status,patient:(uuid,display),visit:(uuid,display,startDatetime),priority,priorityComment,sortWeight,startedAt,endedAt,locationWaitingFor,queueComingFrom,providerWaitingFor,previousQueueEntry)"),u="".concat(a.restBaseUrl,"/queue-entry?v=").concat(i,"&patient=").concat(t,"&isEnded=false"),s=(0,o.ZP)(u,a.openmrsFetch),l=s.data,c=s.error,d=s.isLoading,y=s.mutate;return{data:(null===(r=l)||void 0===r||null===(n=r.data)||void 0===n||null===(e=n.results)||void 0===e?void 0:e.reduce((function(t,e){return!t||new Date(e.startedAt)>new Date(t.startedAt)?e:t}),null))||null,error:c,isLoading:d,mutate:y}}(n),c=l.data,d=l.error;return l.isLoading,d||!c?null:i().createElement(s.default,{queueEntry:c,closeModal:e,modalTitle:r("TransitionLatestQueueEntry","Transition patient's latest queue")})}}}]);