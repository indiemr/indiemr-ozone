"use strict";(globalThis.webpackChunk_openmrs_esm_appointments_app=globalThis.webpackChunk_openmrs_esm_appointments_app||[]).push([[529],{529:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n(268),o=n.n(i),s=n(4924),a=n(3531),l=n(7234),c=n(8527),p=n(3291);const r=function(t){var e=t.patientUuid,n=t.appointmentUuid,r=t.closeModal,u=(0,s.useTranslation)().t,d=(0,l.useVisit)(e),m=d.activeVisit,h=d.mutate,k=(0,p.EJ)().mutateAppointments,f=(0,i.useCallback)((function(){(0,c.q)("Completed",n).then((function(){if(k(),m){var t=new AbortController,e={stopDatetime:new Date};return(0,l.updateVisit)(m.uuid,e,t).then((function(){(0,l.showSnackbar)({title:u("appointmentEnded","Appointment ended"),subtitle:u("appointmentEndedAndVisitClosedSuccessfully","Appointment successfully ended and visit successfully closed"),isLowContrast:!0,kind:"success"}),h()})).catch((function(t){var e;(0,l.showSnackbar)({title:u("appointmentEndedButVisitNotClosedError","Appointment ended successfully, but there was an error closing the visit."),subtitle:null===(e=t)||void 0===e?void 0:e.message,kind:"error",isLowContrast:!0})}))}(0,l.showSnackbar)({title:u("appointmentEnded","Appointment ended"),subtitle:u("appointmentEndedSuccessfully","Appointment successfully ended."),isLowContrast:!0,kind:"success"})})).catch((function(t){var e;(0,l.showSnackbar)({title:u("appointmentEndError","Error ending appointment"),subtitle:null===(e=t)||void 0===e?void 0:e.message,kind:"error",isLowContrast:!0})})).finally((function(){r()}))}),[m,n,r,h,k,u]);return o().createElement("div",null,o().createElement(a.xBx,{closeModal:r,title:u("endAppointmentConfirmation","Are you sure you want to check the patient out for this appointment?")}),o().createElement(a.fef,null,o().createElement("p",null,m?u("endAppointmentAndVisitConfirmationMessage","Checking the patient out will mark the appointment as complete and close out the active visit for this patient."):u("endAppointmentConfirmationMessage","Checking the patient out will mark the appointment as complete."))),o().createElement(a.mzw,null,o().createElement(a.zxk,{kind:"secondary",onClick:r},u("cancel","Cancel")),o().createElement(a.zxk,{kind:"danger",onClick:f},u("checkOut","Check out"))))}}}]);